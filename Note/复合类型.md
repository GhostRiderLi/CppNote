# 第四章 复合类型 #
***
## 4.3 string类简介 ##

1. C++11 允许用带等号和不带等号的初始化列表来初始化string对象和c风格字符串；
    ```c++
    char first[] = {"le chapon def"};
    char second[] {"le chapon def"};
    string third = {"le chapon def"};
    string fourth {"le chapon def"}
    ```

2. C++11 新增加的字符串类型及前缀；wchar_t-->L,char16_t-->u,char32_t-->U.

3.C++11 原始字符串(raw)：将原始字符串放在 "( 和 )" 之间，用R作为标识符，为防止字符冲突，可以在" 和 (之间加任意字符。可以写成公式：
    ```c++
    R"任意字符或者没有(原始字符)任意字符或者没有";
    cout << R"(Jin "\n" ensl)"；
    cout << R+*"("(who wouldnent)")+*"; //显示"(who wouldnent)"
    ``` 

## 4.4 结构简洁 ##

1. C++11 结构体初始化使用初始化列表(用逗号分隔)，等号可选，并且都不允许缩窄转换。

2. C++的结构体可以有函数成员，而C的结构体不能有函数成员。

## 4.5 位字段 ##

1. 在结构体中使用冒号指定成员所使用的位数，成为字位段(bit field).
    ```c++
    struct torgle_register{
        unsigned int SN : 4;
        unsigned int    : 4;  //未用
        bool goodIn     : 1;
        bool goodTorgle : 1;
    };
    ```
2. 可用按位运算来代替，一般不用。

## 4.6 共用体 ##

1. 可以保存不同类型成员，但是，同时只能是其中的一种类型，其长度取决于类型中最长的类型，常用来节省内存。
    ```C++
    union one{
        int val;
        long long_val;
        double double_val;
    }
    ```
2. 当共用体作为结构体成员时，可使用匿名共用体。
    ```c++
    struct people{
        string name;
        union {
            num_id;
            char_id;
        };
    };
    ```

## 4.6 枚举 ##

## 4.7 指针和自由存储空间 ##

1. `new`动态分配指针内存，存储在堆中。

## 4.8 指针、数组和指针算术 ##

1. 指针和数组名的差别： 

2. 数组指针和指针数组：

    + 指针数组：`int *p[20]`：

        + `p[20]`是一个数组；

        + `*p[20]`, `*(p[20])`定义了指针数组；

        + `int *(p[20])` 整型的指针数组。

    + 数组指针：`int (*p)[20]`：

        + `*p`是指针，`int ()[20]`表示一个有20个元素的匿名数组；

        + `int (*)[20]` 表示一个有20个int型数组的指针；

        + `int (*p)[20]` p 是一个有20个int型数组的指针。

    + 数组`int a[100]`，a 和 &a 在数值上相等，但实质不一样:

        + a 是数组的首地址，a 等价于 &a[0];

        + &a 是有100个元素的内存块的地址，`&a + 1` 地址将增加`100*sizeof int`。


3. C++中

4. [静态编译和动态编译][]:

    + 概念：

        + 静态编译：在编译和连接的时候给数组分配内存；    

        + 动态编译：在程序执行的过程中分配内存；

    + 区别：

        + 一是时间不同。静态分配发生在程序编译和连接的时候。动态分配则发生在程序调入和执行的时候；

        +  二是空间不同。堆都是动态分配的，没有静态分配的堆。栈有2种分配方式：静态分配和动态分配。静态分配是编译器完成的，比如局部变量的分配。动态分配由函数malloc进行分配。不过栈的动态分配和堆不同，他的动态分配是由编译器进行释放，无需我们手工实现。    


4. 数据存储方式：

    + 自动存储(automatic variable)：c存储在栈中，只在局部代码块中存在，当程序离开代码块则出栈，消亡。

    + 静态存储：在程序执行期间都存在，有两种方式定义：

        + 在函数外部定义；

        + 在申明变量时使用关键字static

    + 动态存储：

    + 线程存储：

## 4.10 数组的替代品 ##

1. `<vector>`: 动态数组替代品，存贮在堆当中，效率比数组低。

2. `<array>`: 定长数组替代品，存贮在栈当中，效率和数组一致，但更加安全。





[静态编译和动态编译]:http://blog.csdn.net/liuchao1986105/article/details/6724392